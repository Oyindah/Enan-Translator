<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Ẹ̀nan Translator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Noto Sans', sans-serif; }
    .tab-active { background-color: #FEF9C3; border-bottom-color: #824F4F; color: #824F4F; }
  </style>
</head>
<body class="bg-yellow-50 text-gray-800">

  <!-- Header -->
  <header class="text-center py-12 px-4">
    <h1 class="text-4xl md:text-5xl font-extrabold text-red-900 mb-2">Ẹ̀nan Translator</h1>
    <p class="text-lg md:text-xl text-gray-700">A playful Yoruba word game (like Pig Latin) – encode and decode Yoruba instantly!</p>
  </header>

  <!-- Translator Box -->
  <div class="max-w-3xl mx-auto bg-white rounded-2xl shadow-lg p-8">
    <!-- Tabs -->
    <div class="flex space-x-2 mb-6">
      <div id="tabYoruba" class="flex-1 text-center py-2 font-bold rounded-t-xl cursor-pointer bg-gray-200 text-gray-700 border-b-4 border-transparent tab-active" onclick="switchTab('toEna')">Yoruba → Ẹ̀nan</div>
      <div id="tabEna" class="flex-1 text-center py-2 font-bold rounded-t-xl cursor-pointer bg-gray-200 text-gray-700 border-b-4 border-transparent" onclick="switchTab('toYoruba')">Ẹ̀nan → Yoruba</div>
    </div>

    <!-- Yoruba → Ẹ̀nan -->
    <div id="toEna" class="tab-content block">
      <label class="block text-gray-700 font-semibold mb-2">Enter Yoruba text:</label>
      <textarea id="inputYoruba" class="w-full p-3 border border-gray-300 rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-red-200" placeholder="Type Yoruba text here..."></textarea>
      <select id="codeType" class="w-full p-2 mb-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-200"></select>
      <textarea id="outputEna" class="w-full p-3 border border-gray-300 rounded-lg mb-4 bg-gray-50" placeholder="Ẹ̀nan result..." readonly></textarea>
      <div class="bg-yellow-100 p-4 rounded-lg border-l-4 border-red-900 text-gray-700 text-sm">
        <strong>Translation Rules:</strong><br>
        • Break words into syllables.<br>
        • Add consonant + vowel after each syllable.<br>
        • G code example: Ẹja → egejaga<br>
        • Sentence endings: last word gets “ng”.
      </div>
    </div>

    <!-- Ẹ̀nan → Yoruba -->
    <div id="toYoruba" class="tab-content hidden">
      <label class="block text-gray-700 font-semibold mb-2">Enter Ẹ̀nan text:</label>
      <textarea id="inputEna" class="w-full p-3 border border-gray-300 rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-red-200" placeholder="Type Ẹ̀nan text here..."></textarea>
      <select id="decodeType" class="w-full p-2 mb-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-200"></select>
      <textarea id="outputYoruba" class="w-full p-3 border border-gray-300 rounded-lg mb-4 bg-gray-50" placeholder="Yoruba result..." readonly></textarea>
      <div class="bg-yellow-100 p-4 rounded-lg border-l-4 border-red-900 text-gray-700 text-sm">
        <strong>Examples:</strong><br>
        • egejaga → Ẹja<br>
        • mogo fege jege egejanga → Mo fe je Ẹja<br>
      </div>
    </div>
  </div>

  <!-- Info Section -->
  <section class="max-w-3xl mx-auto mt-12 px-4 space-y-6">
    <h2 class="text-2xl font-bold text-red-900">About Ẹ̀nan</h2>
    <p>Ẹ̀nan (also called Ẹ̀na or Ẹ̀nan language) is a Yoruba word game, similar to Pig Latin. Words are transformed by breaking them into syllables and inserting repeating consonant-vowel patterns. It’s often used playfully among children and friends to disguise meaning from outsiders.</p>

    <h2 class="text-2xl font-bold text-red-900">History</h2>
    <p>The tradition of coded languages like Ẹ̀nan is old in Yoruba culture. Variations exist with different consonants (G, D, J, P, S) or clusters (MpT, Fla, TiTi). It demonstrates Yoruba creativity with language play.</p>

    <h2 class="text-2xl font-bold text-red-900">FAQs</h2>
    <p><strong>Q:</strong> Can all Yoruba words be encoded?<br>
       <strong>A:</strong> Yes, though some complex words may sound unusual in Ẹ̀nan.</p>
    <p><strong>Q:</strong> Do people still use Ẹ̀nan?<br>
       <strong>A:</strong> Yes, often playfully among children and sometimes in music and slang.</p>

    <p class="text-gray-500 text-sm">Made by @yorubachic 2025</p>
  </section>

<script>
document.addEventListener("DOMContentLoaded", () => {

  // Populate consonant dropdowns
  const consonants = "bcdfghjklmnpqrstvwxyz"; 
  const selects = [document.getElementById("codeType"), document.getElementById("decodeType")];

  selects.forEach(select => {
    consonants.split("").forEach(c => {
      let opt = document.createElement("option");
      opt.value = c;
      opt.textContent = c.toUpperCase() + " Code";
      select.appendChild(opt);
    });
    select.value = "g"; // default
  });

  // Tab switching
  window.switchTab = function(tabId) {
    document.querySelectorAll(".tab-content").forEach(c => c.classList.add("hidden"));
    document.getElementById(tabId).classList.remove("hidden");

    document.getElementById("tabYoruba").classList.remove("tab-active");
    document.getElementById("tabEna").classList.remove("tab-active");
    if(tabId === "toEna") document.getElementById("tabYoruba").classList.add("tab-active");
    else document.getElementById("tabEna").classList.add("tab-active");
  };

  // Encode function (symbol-safe, last n fixed)
  function applyConsonantCode(word, consonant, isLastWord=false) {
    const vowels = "aeiouẹọAEIOUẸỌ";
    const letters = "abcdefghijklmnopqrstuvwxyzẹọABCDEFGHIJKLMNOPQRSTUVWXYZẸỌ";

    if (word.toLowerCase() === "n" || word === "ń") return consonant + "un";

    let syllables = [];
    let current = "";

    for (let char of word) {
      if (!letters.includes(char)) {
        if (current) { syllables.push(current); current = ""; }
        syllables.push(char);
      } else {
        current += char.toLowerCase();
        if (vowels.includes(char)) { syllables.push(current); current = ""; }
      }
    }
    if (current) syllables.push(current);

    let lastLetterIndex = -1;
    for (let i = syllables.length - 1; i >= 0; i--) {
      if (/^[a-zẹọ]+$/.test(syllables[i])) { lastLetterIndex = i; break; }
    }

    let newWord = "";
    syllables.forEach((syl, idx) => {
      if (/^[a-zẹọ]+$/.test(syl)) {
        let code = consonant + syl[syl.length - 1];
        if (isLastWord && idx === lastLetterIndex) code = "n" + code;
        newWord += syl + code;
      } else { newWord += syl; }
    });

    return newWord;
  }

  // Yoruba → Ẹ̀nan
  document.getElementById("inputYoruba").addEventListener("input", () => {
    let text = document.getElementById("inputYoruba").value.trim();
    let codeType = document.getElementById("codeType").value;
    let words = text.split(/\s+/);
    let result = [];
    words.forEach((word, idx) => {
      let isLastWord = idx === words.length - 1;
      result.push(applyConsonantCode(word, codeType, isLastWord));
    });
    let sentence = result.join(" ").toLowerCase();
    sentence = sentence.charAt(0).toUpperCase() + sentence.slice(1);
    document.getElementById("outputEna").value = sentence;
  });

  // Ẹ̀nan → Yoruba
  document.getElementById("inputEna").addEventListener("input", () => {
    let text = document.getElementById("inputEna").value.trim();
    let codeType = document.getElementById("decodeType").value;
    let words = text.split(/\s+/);
    let result = [];

    words.forEach(word => {
      let parts = word.match(/[a-zẹọ]+|[^a-zẹọ]+/gi) || [];
      let decoded = parts.map(p => {
        if (/^[a-zẹọ]+$/i.test(p)) {
          let regex = new RegExp("(n?" + codeType + ")[aeiouẹọAEIOUẸỌ]", "gi");
          return p.replace(regex, "");
        } else {
          return p;
        }
      }).join("");
      result.push(decoded);
    });

    let sentence = result.join(" ").toLowerCase();
    sentence = sentence.charAt(0).toUpperCase() + sentence.slice(1);
    document.getElementById("outputYoruba").value = sentence;
  });

});
</script>

</body>
</html>